TUF_URL=$(oc -n tas-test get tuf securesign-sample -o jsonpath='{.status.url}')
FULCIO_URL=$(oc -n tas-test get fulcio securesign-sample -o jsonpath='{.status.url}')
REKOR_URL=$(oc -n tas-test get rekor securesign-sample -o jsonpath='{.status.url}')
OPENSHIFT_APPS_SUBDOMAIN=apps.$(oc get dns cluster -o jsonpath='{ .spec.baseDomain }')
OIDC_ISSUER=https://keycloak-keycloak-system.$OPENSHIFT_APPS_SUBDOMAIN/auth/realms/sigstore

rm -r ~/.sigstore
cosign initialize --mirror=$TUF_URL --root=$TUF_URL/root.json
cosign sign -y --fulcio-url=$FULCIO_URL --rekor-url=$REKOR_URL --oidc-issuer=$OIDC_ISSUER quay.io/tdalton/rhtastest:test3
cosign verify --rekor-url=$REKOR_URL --certificate-identity-regexp jdoe --certificate-oidc-issuer-regexp keycloak quay.io/tdalton/rhtastest:test3